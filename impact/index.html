<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8">
    <!-- Tell IE to use the latest, best version (or Chrome Frame if pre-IE11). -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <title>Impact simulator</title>
    <!--<script type="text/javascript" src="swfobject.js"></script>
  <script type="text/javascript">swfobject.embedSWF("wrapper.swf", "mySWF", "1920", "1080", "9.0.0");</script>-->
    <!--AIzaSyBjFcLyVn8YlXNVjfn68AJWyDr_csA-5ds-->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAxSlIafmmEb1dgKA4fjGMNaitu7ZO4f1c"></script>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.80/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.80/Build/Cesium/Widgets/widgets.css" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="css/impact.css">
    <style>
        @font-face {
            font-family: "Scala";
            src: url("fonts/SCSLFBD.TTF");
        }

        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #40505C;
            font-family: Scala;
            color: white;
        }

        #cesiumContainer {
            position: absolute;
            width: 816px;
            height: 586px;
            left: 20px;
            top: 22px;
            z-index: 0;
        }

        #leftMenu {
            position: absolute;
            left: 860px;
            top: 26px;
        }

        .titleText {
            font-size: 36px;
            margin-bottom: 20px;
        }

        .subtitleText {
            font-size: 24px;
            color: #FFEF00;
            margin-bottom: 15px;
        }

        .label {
            font-size: 18px;
        }

        #impactors {
            margin-bottom: 15px;
        }

        #type {
            vertical-align: top;
            display: inline-block;
        }

        #type div {
            margin-bottom: 10px;
        }

        #size {
            display: inline-block;
            margin-left: 30px;
        }

        #size div {
            margin-bottom: 10px;
        }

        #goButton {
            position: absolute;
            left: 970px;
            top: 650px;
        }

        #description {
            position: absolute;
            left: 20px;
            top: 618px;
            width: 816px;
            height: 186px;
            background-color: #6C879C;
        }

        #description div {
            display: inline-block;
            vertical-align: top;
        }

        #zoomButtons {
            position: absolute;
            width: 50px;
            left: 780px;
            top: 480px;
        }
    </style>

    <script>
        function selectImpactor(type) {
            document.getElementById('asteroid').src = "images/asteroid_up.png";
            document.getElementById('comet').src = "images/comet_up.png";

            document.getElementById(type).src = "images/" + type + "_down.png";

            impactType = type;

            updateDescription();
        }

        function selectSize(size) {
            document.getElementById('small').src = "images/small_up.png";
            document.getElementById('medium').src = "images/medium_up.png";
            document.getElementById('large').src = "images/large_up.png";

            document.getElementById(size).src = "images/" + size + "_down.png";

            impactSize = size;

            updateDescription();
        }

        function selectDefaults() {
            impactType = "asteroid";
            impactSize = "small";

            selectImpactor('asteroid');
            selectSize('small');


        }

        function launchObject() {
            updateImpact();
            if (userLoc == "custom") {
                setZipCode(document.getElementById("addressInput").value, impactType, impactSize);
                return;
            }
            if (userLoc == "random") {
                userLat = -90 + Math.random() * 180;
                userLong = -180 + Math.random() * 360;
            }
            setVars(userLat, userLong, impactType, impactSize);

        }

        function selectLocation(loc, lat, lng) {
            userLoc = loc;
            userLat = lat;
            userLong = lng;

            document.getElementById("enterLocation").style.display = userLoc == "custom" ? "block" : "none";

            if (userLoc == "custom") {
                document.getElementById("addressInput").focus();
            }

            //alert(loc + ", " + lat + ", " +lng);
        }

        var desc_asteroid_small = "This iron asteroid is about the size of a school bus and travels at about 20 km (12 miles) a second. Pres GO to see what happens if it hits Earth.";
        var desc_asteroid_medium = "This stony asteroid is three times the size of a football field and traveling 20 km (12 miles) a second. Press GO to see what happens if it hits Earth.";
        var desc_asteroid_large = "This stony asteroid is 2 km (1.2 miles) across, and traveling 20 km (12 miles) a second. Press GO to see what happens if it hits Earth.";

        var desc_comet_small = "This miniature icy mud ball is the size of a football field, and moving 50 km (30 miles) a second. Press GO to see what happens if it hits Earth.";
        var desc_comet_medium = "This small icy mud ball is 1 km (0.6 miles) across, and moving 50 km (30 miles) a second. Press GO to see what happens if it hits Earth.";
        var desc_comet_large = "This icy mud ball is over 6 miles across, and moving 50 km (30 miles) a second. Press GO to see what happens if it hits Earth.";

        var impact_asteroid_small = "Impacts like this occur every 1000 years or so. The effects aren't too widespread, but you wouldn't want to be nearby.";
        var impact_asteroid_medium = "Impacts like this occur every 50,000 years or so. The effects are still local, but it creates a large fireball.";
        var impact_asteroid_large = "Impacts like this occur every two million years or so. The damage would cover a medium sized state, but it still wouldn't lead to global extinctions.";

        var impact_comet_small = "Despite its speed, ice doesn't have the mass of iron or rock, so little damage is done. And in any case we don't see comets this small.";
        var impact_comet_medium = "Impacts like this occur every few hundred million years or so. Damage would be widespread, but it wouldnâ€™t lead to global extinctions.";
        var impact_comet_large = "The fireball may be big, but the real issue here is that enough debris is thrown into the atmosphere to darken the skies. This is an extinction event... a \"dinosaur killer.\"  Happily these may only occur every billion years or so.";

        function updateDescription() {
            document.getElementById("descriptionImage").src = "images/" + impactType + "_" + impactSize + ".png";

            var desc = eval("desc_" + impactType + "_" + impactSize);

            if (desc != null) {
                document.getElementById("descriptionText").innerHTML = desc;
            }

        }

        function updateImpact() {
            document.getElementById("descriptionImage").src = "images/impact.png";

            var desc = eval("impact_" + impactType + "_" + impactSize);

            document.getElementById("descriptionText").innerHTML = desc;

        }

    </script>
</head>

<body onload="selectDefaults()">

    <div id="leftMenu">
        <div class="titleText">
            Asteroid Impact
        </div>
        <!-- <div class="subtitleText">
            
        </div> -->
        <div id="impactors">
            <div id="type">
                <div class="label">TYPE:</div>
                <div><a href="#" onclick="selectImpactor('asteroid'); return false;">
                        <div id="asteroid">
                            Asteroid
                        </div>
                    </a></div>
                <div><a href="#" onclick="selectImpactor('comet'); return false;"><img id="comet"
                            src="images/comet_up.png" border="0" /></a></div>
            </div>
            <div id="size">
                <div class="label">SIZE:</div>
                <div><a href="#" onclick="selectSize('small'); return false;"><img id="small" src="images/small_up.png"
                            border="0" /></a></div>
                <div><a href="#" onclick="selectSize('medium'); return false;"><img id="medium"
                            src="images/medium_up.png" border="0" /></a></div>
                <div><a href="#" onclick="selectSize('large'); return false;"><img id="large" src="images/large_up.png"
                            border="0" /></a></div>
            </div>
        </div>
        <div style="clear"></div>
        <div class="subtitleText">
            2) Choose an impact location.
        </div>
        <div>
            <div class="container">
                <div class="custom-select-wrapper">
                    <div class="custom-select">
                        <div class="custom-select__trigger"><span>I feel unlucky! (random)</span>
                            <div class="arrow"></div>
                        </div>
                        <div class="custom-options">
                            <span class="custom-option selected" data-value="random" data-lat="0" data-lng="0">I feel
                                unlucky! (random)</span>
                            <span class="custom-option" data-value="custom" data-lat="0" data-lng="0">Pick your
                                own...</span>
                            <span class="custom-option" data-value="atlanta" data-lat="33.749"
                                data-lng="-84.388">Atlanta, Georgia, U.S.A.</span>
                            <span class="custom-option" data-value="beijing" data-lat="39.905"
                                data-lng="116.408">Beijing, China</span>
                            <span class="custom-option" data-value="brasilia" data-lat="-15.78"
                                data-lng="-47.929">Brasilia, Brasil</span>
                            <span class="custom-option" data-value="delhi" data-lat="28.635" data-lng="77.225">Delhi,
                                India</span>
                            <span class="custom-option" data-value="denver" data-lat="39.739"
                                data-lng="-104.985">Denver, Colorado, U.S.A.</span>
                            <span class="custom-option" data-value="istanbul" data-lat="41.005"
                                data-lng="28.977">Istanbul, Turkey</span>
                            <span class="custom-option" data-value="johannesburg" data-lat="-26.201"
                                data-lng="28.045">Johannesburg, South Africa</span>
                            <span class="custom-option" data-value="kampala" data-lat="0.314" data-lng="32.573">Kampala,
                                Uganda</span>
                            <span class="custom-option" data-value="london" data-lat="51.5" data-lng="-0.126">London,
                                England</span>
                            <span class="custom-option" data-value="la" data-lat="34.052" data-lng="-118.244">L.A.,
                                California, U.S.A.</span>
                            <span class="custom-option" data-value="newyork" data-lat="40.714" data-lng="-74.006">New
                                York, New York, U.S.A.</span>
                            <span class="custom-option" data-value="paris" data-lat="48.857" data-lng="2.351">Paris,
                                France</span>
                            <span class="custom-option" data-value="santiago" data-lat="-33.425"
                                data-lng="-70.566">Santiago, Chile</span>
                            <span class="custom-option" data-value="sydney" data-lat="-33.867"
                                data-lng="151.207">Sydney, Australia</span>
                        </div>
                    </div>
                </div>
            </div>
            <div id="enterLocation" style="display:none"><input id="addressInput"
                    style="width: 348px; height: 40px; font-size: 18px; border: 5px solid #77b6cc; margin-left: 1px; margin-top: 10px; text-indent: 10px"
                    placeholder="Enter zip code or city, state" /></div>
        </div>

        <script type="text/javascript" src="js/impact.js"></script>
    </div>

    <div id="goButton">
        <a href="#" onclick="launchObject(); return false;"><img src="images/go_up.png" width="150"
                onmouseout="this.src='images/go_up.png'" onmousedown="this.src='images/go_down.png'"
                onmouseup="this.src='images/go_up.png'" /></a>
    </div>

    <div id="description">
        <div><img id="descriptionImage" src="images/asteroid_small.png" /></div>
        <div style="width: 500px">
            <p style="margin: 20px; font-size: 22px" id="descriptionText">This iron asteroid is about the size of a
                school bus and travels at about 20 km (12 miles) a second. Pres GO to see what happens if it hits Earth.
            </p>
        </div>
    </div>
    <div id="cesiumContainer"></div>

    <div id="zoomButtons">
        <div><a href="#" onclick="zoomIn(); return false;"><img src="images/plus_up.png" width="50" border="0"
                    onmouseout="this.src='images/plus_up.png'" onmousedown="this.src='images/plus_down.png'"
                    onmouseup="this.src='images/plus_up.png'" /></a></div>
        <div><a href="#" onclick="zoomOut(); return false;"><img src="images/minus_up.png" width="50" border="0"
                    onmouseout="this.src='images/minus_up.png'" onmousedown="this.src='images/minus_down.png'"
                    onmouseup="this.src='images/minus_up.png'" /></a></div>
    </div>

    <script>
        var elevator = new google.maps.ElevationService;
        var geocoder = new google.maps.Geocoder();

        var impacted = false;

        var w = 816;
        var h = 586;

        var userLoc = "random";
        var userLat = 0;
        var userLong = 0;
        var impactType;
        var impactSize;

        var flightDuration = 5;
        var overWater = true;

        var timeoutId = 0;

        //Cesium.BingMapsApi.defaultKey = "AsoN_ZFBtlnWQ1-vgvvp0naHRrx5Rf4TKmoyFzr0ppVX2DshVlxoSStVwVzZzK-R";
        Cesium.Ion.defaultAccessToken = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2ZWJmOWRlYS0xOTliLTQzZjYtYmRiOC05NjU3ZTc3ZjM2ZjEiLCJpZCI6MTczNjIsInNjb3BlcyI6WyJhc3IiLCJnYyJdLCJpYXQiOjE1NzIwMzc1Mjh9.nv1kUoYdCHJaF5OenHM4wcV7TBIT4H9_kzcP6BOW1ow";

        var viewer = new Cesium.Viewer('cesiumContainer', {

            //terrainProviderViewModels: terrainModels,
            //selectedTerrainProviderViewModel: terrainModels[1],
            animation: false,
            baseLayerPicker: false,
            fullscreenButton: false,
            geocoder: false,
            homeButton: false,
            infoBox: true,
            sceneModePicker: false,
            selectionIndicator: false,
            timeline: false,
            navigationHelpButton: false,
            navigationInstructionsInitiallyVisible: false,
            showRenderLoopErrors: false,
            //creditContainer: "credits",
            // Use high-res stars downloaded from https://github.com/AnalyticalGraphicsInc/cesium-assets
            /*skyBox : new Cesium.SkyBox({
                sources : {
                  positiveX : '../stars/TychoSkymapII.t3_08192x04096_80_px.jpg',
                  negativeX : '../stars/TychoSkymapII.t3_08192x04096_80_mx.jpg',
                  positiveY : '../stars/TychoSkymapII.t3_08192x04096_80_py.jpg',
                  negativeY : '../stars/TychoSkymapII.t3_08192x04096_80_my.jpg',
                  positiveZ : '../stars/TychoSkymapII.t3_08192x04096_80_pz.jpg',
                  negativeZ : '../stars/TychoSkymapII.t3_08192x04096_80_mz.jpg'
                }
            })*///,
            // Show Columbus View map with Web Mercator projection
            //mapProjection : new Cesium.WebMercatorProjection()
        });

        var imageryLayer = viewer.imageryLayers.addImageryProvider(
            new Cesium.IonImageryProvider({ assetId: 3 })
        );

        var scene = viewer.scene;
        var camera = scene.camera;
        var ellipsoid = scene.globe.ellipsoid;
        var pos;

        scene.screenSpaceCameraController.enableRotate = false;
        scene.screenSpaceCameraController.enableTranslate = false;
        scene.screenSpaceCameraController.enableZoom = false;
        scene.screenSpaceCameraController.enableTilt = false;
        scene.screenSpaceCameraController.enableLook = false;

        function setZipCode(passedZip, passedType, passedSize) {
            var lat = 0;
            var long = 0;
            geocoder.geocode({ 'address': passedZip }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    lat = results[0].geometry.location.lat();
                    long = results[0].geometry.location.lng();
                }
                setVars(lat, long, passedType, passedSize);
            });
        }

        function setVars(passedLat, passedLong, passedType, passedSize) {
            if (isNaN(passedLat) || isNaN(passedLong)) {
                //this should never come up; if it does then there is a serious issue
                alert("You need to specifiy a location of impact.");
            }
            else {
                //everything written to global vars for ease of access by other functions
                userLat = passedLat;
                userLong = passedLong;
                impactType = passedType;
                impactSize = passedSize;

                if (camera.positionCartographic.height < 10000000) {
                    setTimeout(launchNEO, 2000);
                    camera.flyTo({
                        destination: Cesium.Cartesian3.fromDegrees(userLong / 2, userLat / 2, 18000000),
                        duration: 2
                    });
                }
                else {
                    launchNEO();
                }
                //firstCameraMove();
            }
        }

        var circles = [];

        var airburst = addEntity(4750.0, Cesium.Color.AQUA, 'Airburst: Multistory Buildings & 90% of Trees Blown Down', 2250, 'aquacircle', 1); //small rocky land

        var impact = addEntity(1000.0, Cesium.Color.RED, 'Impact Crater', 500, 'redcircle', 1);
        var steel = addEntity(3000.0, Cesium.Color.BISQUE, 'Steel Buildings Knocked Over', 2500, 'bisquecircle', 1);

        var burns = addEntity(70000.0, Cesium.Color.LIGHTBLUE, '1st Degree Burns', 64000, 'lightbluecircle', 1);
        var ignite = addEntity(30000.0, Cesium.Color.LIGHTGREEN, 'Clothing Ignites', 25000, 'lightgreencircle', 0.8);
        var steel2 = addEntity(20000.0, Cesium.Color.BISQUE, 'Steel Buildings Knocked Over', 15000, 'bisquecircle2', 0.6);
        var impact2 = addEntity(3000.0, Cesium.Color.RED, 'Impact Crater', 1500, 'redcircle2', 0.6);

        var burns2 = addEntity(600000.0, Cesium.Color.LIGHTBLUE, '1st Degree Burns', 540000, 'lightbluecircle2', 1);
        var ignite2 = addEntity(300000.0, Cesium.Color.LIGHTGREEN, 'Clothing Ignites', 250000, 'lightgreencircle2', 0.8);
        var steel3 = addEntity(200000.0, Cesium.Color.BISQUE, 'Steel Buildings Knocked Over', 150000, 'bisquecircle3', 0.6);
        var quake = addEntity(100000.0, Cesium.Color.YELLOW, '7.0 Earthquake', 76000, 'yellowcircle', 0.5);
        var impact3 = addEntity(15000.0, Cesium.Color.RED, 'Impact Crater', 7500, 'redcircle3', 0.4);

        var burns3 = addEntity(300000.0, Cesium.Color.LIGHTBLUE, '1st Degree Burns', 250000, 'lightbluecircle3', 1);
        var ignite3 = addEntity(150000.0, Cesium.Color.LIGHTGREEN, 'Clothing Ignites', 120000, 'lightgreencircle3', 0.8);
        var quake2 = addEntity(100000.0, Cesium.Color.YELLOW, '7.0 Earthquake', 85000, 'yellowcircle2', 0.7);
        var steel4 = addEntity(80000.0, Cesium.Color.BISQUE, 'Steel Buildings Knocked Over', 60000, 'bisquecircle4', 0.6);
        var impact4 = addEntity(9500.0, Cesium.Color.RED, 'Impact Crater', 4500, 'redcircle4', 0.4);

        var burns4 = addEntity(1400000.0, Cesium.Color.LIGHTBLUE, '1st Degree Burns', 1300000, 'lightbluecircle4', 1);
        var ignite4 = addEntity(1300000.0, Cesium.Color.LIGHTGREEN, 'Clothing Ignites', 1100000, 'lightgreencircle4', 0.8);
        var steel5 = addEntity(840000.0, Cesium.Color.BISQUE, 'Steel Buildings Knocked Over', 600000, 'bisquecircle5', 0.7);
        var quake3 = addEntity(300000.0, Cesium.Color.YELLOW, '7.0 Earthquake', 250000, 'yellowcircle3', 0.6);
        var impact5 = addEntity(71500.0, Cesium.Color.RED, 'Impact Crater', 35000, 'redcircle5', 0.4);

        var steel6 = addEntity(2000.0, Cesium.Color.BISQUE, 'Steel Buildings Knocked Over', 1500, 'bisquecircle6', 0.7);

        var wave7 = addEntity(12000.0, Cesium.Color.GREEN, '7m Wave Height', 10000, 'greencircle', 1);
        var wave21 = addEntity(8200.0, Cesium.Color.NAVAJOWHITE, '21m Wave Height', 5000, 'whitecircle', 0.8);
        var impact6 = addEntity(1200.0, Cesium.Color.RED, 'Impact Crater', 500, 'redcircle6', 0.4);

        var wave72 = addEntity(46000.0, Cesium.Color.GREEN, '7m Wave Height', 40000, 'greencircle2', 1);
        var wave212 = addEntity(28500.0, Cesium.Color.NAVAJOWHITE, '21m Wave Height', 22000, 'whitecircle2', 0.8);
        var wave135 = addEntity(13000.0, Cesium.Color.KHAKI, '135m Wave Height', 10000, 'khakicircle', 0.6);
        var impact7 = addEntity(3700.0, Cesium.Color.RED, 'Impact Crater', 1500, 'redcircle7', 0.4);

        var wave213 = addEntity(700000.0, Cesium.Color.NAVAJOWHITE, '21m Wave Height', 600000, 'whitecircle3', 1);
        var wave1352 = addEntity(120000.0, Cesium.Color.KHAKI, '135m Wave Height', 100000, 'khakicircle2', 0.8);
        var impact8 = addEntity(16300.0, Cesium.Color.RED, 'Impact Crater', 8000, 'redcircle8', 0.6);

        var wave73 = addEntity(1500000.0, Cesium.Color.GREEN, '7m Wave Height', 1000000, 'greencircle3', 1);
        var wave214 = addEntity(500000.0, Cesium.Color.NAVAJOWHITE, '21m Wave Height', 300000, 'whitecircle4', 0.8);
        var wave1353 = addEntity(80000.0, Cesium.Color.KHAKI, '135m Wave Height', 60000, 'khakicircle3', 0.6);
        var impact9 = addEntity(10600.0, Cesium.Color.RED, 'Impact Crater', 5000, 'redcircle9', 0.5);

        var wave215 = addEntity(3000000.0, Cesium.Color.NAVAJOWHITE, '21m Wave Height', 1500000, 'whitecircle5', 1);
        var wave1354 = addEntity(475000.0, Cesium.Color.KHAKI, '135m Wave Height', 220000, 'khakicircle4', 0.8);
        var impact10 = addEntity(64000.0, Cesium.Color.RED, 'Impact Crater', 20000, 'redcircle10', 0.6);

        var wave74 = addEntity(20000.0, Cesium.Color.GREEN, '7m Wave Height', 10000, 'greencircle4', 1);
        var wave216 = addEntity(6500.0, Cesium.Color.NAVAJOWHITE, '21m Wave Height', 3000, 'whitecircle6', 0.8);
        var impact11 = addEntity(1400.0, Cesium.Color.RED, 'Impact Crater', 1000, 'redcircle11', 0.6);

        function addEntity(size, color, text, offset, name, lScale) {
            var entity = viewer.entities.add({
                //position: Cesium.Cartesian3.fromDegrees(pos.x, pos.y, 100),
                name: name,
                ellipse: {
                    semiMinorAxis: size,
                    semiMajorAxis: size,
                    material: color.withAlpha(0.3),
                    outline: true,
                    outlineColor: color
                },
                label: {
                    text: text,
                    font: '40px Scala',
                    fillColor: Cesium.Color.BLACK,
                    outlineColor: Cesium.Color.WHITE,
                    outlineWidth: 0.3,
                    style: Cesium.LabelStyle.FILL_AND_OUTLINE,
                    scale: lScale,
                    eyeOffset: new Cesium.Cartesian3(0, offset, 0),
                    translucencyByDistance: new Cesium.NearFarScalar(size * 16, 1.0, size * 20, 0.0)
                }
            });

            return entity;
        }

        function launchNEO() {
            //alert("launch");
            for (var n = 0; n < circles.length; n++) {
                var c = circles[n];
                c.show = false;
            }

            clearTimeout(timeoutId);

            pos = new Cesium.Cartesian3(userLong, userLat);

            overWater = true;
            elevator.getElevationForLocations({ 'locations': [new google.maps.LatLng(pos.y, pos.x)] },
                function (results, status) {
                    if (status === google.maps.ElevationStatus.OK) {
                        if (results[0]) {
                            if (results[0].elevation > -40) {
                                overWater = false;
                            }
                        }
                    }
                });

            timeoutId = setTimeout(showDamage, flightDuration * 1000);

            camera.flyTo({ destination: Cesium.Cartesian3.fromDegrees(userLong, userLat, 300), duration: flightDuration });
        }

        function showDamage() {
            //alert("damage: type: " + impactType + ", size: " + impactSize + ", over water: " + overWater);
            impacted = true;

            circles = [];

            if (impactType == 'asteroid') {
                if (!overWater) {
                    switch (impactSize) {
                        case 'Small Rocky':
                            circles.push(airburst);
                            break;
                        case 'small':
                            circles.push(steel);
                            circles.push(impact);
                            break;
                        case 'medium':
                            circles.push(burns);
                            circles.push(ignite);
                            circles.push(steel2);
                            circles.push(impact2);
                            break;
                        case 'large':
                            circles.push(burns2);
                            circles.push(ignite2);
                            circles.push(steel3);
                            circles.push(quake);
                            circles.push(impact3);
                            break;
                        default:
                            break;
                    }
                }
                else {
                    switch (impactSize) {
                        case 'Small Rocky':
                            circles.push(airburst);
                            break;
                        case 'small':
                            circles.push(wave7);
                            circles.push(wave21);
                            circles.push(impact6);
                            break;
                        case 'medium':
                            circles.push(wave72);
                            circles.push(wave212);
                            circles.push(wave135);
                            circles.push(impact7);
                            break;
                        case 'large':
                            circles.push(wave213);
                            circles.push(wave1352);
                            circles.push(impact8);
                            break;
                        default:
                            break;
                    }
                }
            }
            else if (impactType == 'comet') {
                if (!overWater) {
                    switch (impactSize) {
                        case 'small':
                            circles.push(steel6);
                            circles.push(impact);
                            break;
                        case 'medium':
                            circles.push(burns3);
                            circles.push(ignite3);
                            circles.push(quake2);
                            circles.push(steel4);
                            circles.push(impact4);
                            break;
                        case 'large':
                            circles.push(burns4);
                            circles.push(ignite4);
                            circles.push(steel5);
                            circles.push(quake3);
                            circles.push(impact5);
                            break;
                        default:
                            break;
                    }
                }
                else {
                    switch (impactSize) {
                        case 'small':
                            circles.push(wave74);
                            circles.push(wave216);
                            circles.push(impact11);
                            break;
                        case 'medium':
                            circles.push(wave73);
                            circles.push(wave214);
                            circles.push(wave1353);
                            circles.push(impact9);
                            break;
                        case 'large':
                            circles.push(wave215);
                            circles.push(wave1354);
                            circles.push(impact10);
                            break;
                        default:
                            break;
                    }
                }
            }

            //alert(circles);

            for (var i = 0; i < circles.length; i++) {
                var circle = circles[i];
                circle.show = true;
                circle.position = Cesium.Cartesian3.fromDegrees(pos.x, pos.y, 100 + i);
            }


            var baseCircle = circles[0];

            var radius = baseCircle.ellipse.semiMajorAxis._value;

            //alert(radius + " " + flightDuration);
            viewer.flyTo(baseCircle, {
                duration: flightDuration,
                offset: new Cesium.HeadingPitchRange(0, -Math.PI, radius * 3)
            });
        }


        function zoomOut() {
            //alert("impacted? " + impacted);
            if (camera.positionCartographic.height > 16000000 || !impacted) return;
            camera.flyTo({ destination: Cesium.Cartesian3.fromDegrees(userLong, userLat, camera.positionCartographic.height * 2), duration: 0.5 });
            //camera.flyTo({ destination: Cesium.Cartesian3.fromDegrees(0, 0, 300), duration: 5 });
        }

        function zoomIn() {
            if (!impacted) return;
            camera.flyTo({ destination: Cesium.Cartesian3.fromDegrees(userLong, userLat, camera.positionCartographic.height / 2), duration: 0.5 });
        }
    </script>

    <script>
        function flashLoaded() {
            //setTimeout(flipFlash, 1000);
            flipFlash();
        }

        function flipFlash() {
            document.getElementById("cesiumContainer").style.zIndex = "1";
            document.getElementById("flashContent").style.zIndex = "0";
        }
    </script>


</body>

</html>